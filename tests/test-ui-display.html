<!DOCTYPE html>
<html>
<head>
    <title>UI Display Test</title>
</head>
<body>
    <h1>Testing Message Display in UI</h1>
    <div id="status"></div>
    <div id="messages"></div>
    
    <script>
        const status = document.getElementById('status');
        const messagesDiv = document.getElementById('messages');
        
        status.textContent = 'Open the browser console and navigate to http://localhost:3000';
        
        // Instructions for manual testing
        console.log('%c=== UI Display Test Instructions ===', 'color: blue; font-weight: bold');
        console.log('1. Open http://localhost:3000 in this browser');
        console.log('2. Type a message like "Hello" and press Enter');
        console.log('3. Watch for the AI response to appear');
        console.log('4. Check the browser console for any errors');
        console.log('');
        console.log('Expected behavior:');
        console.log('- User message should appear immediately');
        console.log('- Loading indicator should show');
        console.log('- AI response should stream in character by character');
        console.log('- No console errors');
        
        // Automated check for API
        async function checkAPI() {
            try {
                const response = await fetch('http://localhost:3000/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        messages: [{
                            id: 'ui-test-1',
                            role: 'user',
                            content: 'Test message'
                        }],
                        chatId: 'ui-test',
                        userId: 'test-user',
                        model: 'gpt-5-mini'
                    })
                });
                
                if (response.ok) {
                    console.log('✅ API is responding correctly');
                    messagesDiv.innerHTML = '<p style="color: green">✅ API Test Passed - Now test the UI manually at http://localhost:3000</p>';
                } else {
                    console.error('❌ API returned error:', response.status);
                    messagesDiv.innerHTML = '<p style="color: red">❌ API Error - Check server logs</p>';
                }
            } catch (error) {
                console.error('❌ API request failed:', error);
                messagesDiv.innerHTML = '<p style="color: red">❌ Cannot reach API - Is the server running?</p>';
            }
        }
        
        // Run API check
        checkAPI();
    </script>
</body>
</html>